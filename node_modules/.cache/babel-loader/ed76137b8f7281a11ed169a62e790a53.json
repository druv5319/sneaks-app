{"ast":null,"code":"/*!\n * ee-first\n * Copyright(c) 2014 Jonathan Ong\n * MIT Licensed\n */\n'use strict';\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = first;\n/**\n * Get the first event in a set of event emitters and event pairs.\n *\n * @param {array} stuff\n * @param {function} done\n * @public\n */\n\nfunction first(stuff, done) {\n  if (!Array.isArray(stuff)) throw new TypeError('arg must be an array of [ee, events...] arrays');\n  var cleanups = [];\n\n  for (var i = 0; i < stuff.length; i++) {\n    var arr = stuff[i];\n    if (!Array.isArray(arr) || arr.length < 2) throw new TypeError('each array member must be [ee, events...]');\n    var ee = arr[0];\n\n    for (var j = 1; j < arr.length; j++) {\n      var event = arr[j];\n      var fn = listener(event, callback); // listen to the event\n\n      ee.on(event, fn); // push this listener to the list of cleanups\n\n      cleanups.push({\n        ee: ee,\n        event: event,\n        fn: fn\n      });\n    }\n  }\n\n  function callback() {\n    cleanup();\n    done.apply(null, arguments);\n  }\n\n  function cleanup() {\n    var x;\n\n    for (var i = 0; i < cleanups.length; i++) {\n      x = cleanups[i];\n      x.ee.removeListener(x.event, x.fn);\n    }\n  }\n\n  function thunk(fn) {\n    done = fn;\n  }\n\n  thunk.cancel = cleanup;\n  return thunk;\n}\n/**\n * Create the event listener.\n * @private\n */\n\n\nfunction listener(event, done) {\n  return function onevent(arg1) {\n    var args = new Array(arguments.length);\n    var ee = this;\n    var err = event === 'error' ? arg1 : null; // copy args to prevent arguments escaping scope\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    done(err, ee, event, args);\n  };\n}","map":{"version":3,"sources":["/Users/dhruv/Sneaks/sneaks-website/node_modules/ee-first/index.js"],"names":["module","exports","first","stuff","done","Array","isArray","TypeError","cleanups","i","length","arr","ee","j","event","fn","listener","callback","on","push","cleanup","apply","arguments","x","removeListener","thunk","cancel","onevent","arg1","args","err"],"mappings":"AAAA;;;;;AAMA;AAEA;;;;;AAKAA,MAAM,CAACC,OAAP,GAAiBC,KAAjB;AAEA;;;;;;;;AAQA,SAASA,KAAT,CAAeC,KAAf,EAAsBC,IAAtB,EAA4B;AAC1B,MAAI,CAACC,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAL,EACE,MAAM,IAAII,SAAJ,CAAc,gDAAd,CAAN;AAEF,MAAIC,QAAQ,GAAG,EAAf;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,KAAK,CAACO,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,QAAIE,GAAG,GAAGR,KAAK,CAACM,CAAD,CAAf;AAEA,QAAI,CAACJ,KAAK,CAACC,OAAN,CAAcK,GAAd,CAAD,IAAuBA,GAAG,CAACD,MAAJ,GAAa,CAAxC,EACE,MAAM,IAAIH,SAAJ,CAAc,2CAAd,CAAN;AAEF,QAAIK,EAAE,GAAGD,GAAG,CAAC,CAAD,CAAZ;;AAEA,SAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,GAAG,CAACD,MAAxB,EAAgCG,CAAC,EAAjC,EAAqC;AACnC,UAAIC,KAAK,GAAGH,GAAG,CAACE,CAAD,CAAf;AACA,UAAIE,EAAE,GAAGC,QAAQ,CAACF,KAAD,EAAQG,QAAR,CAAjB,CAFmC,CAInC;;AACAL,MAAAA,EAAE,CAACM,EAAH,CAAMJ,KAAN,EAAaC,EAAb,EALmC,CAMnC;;AACAP,MAAAA,QAAQ,CAACW,IAAT,CAAc;AACZP,QAAAA,EAAE,EAAEA,EADQ;AAEZE,QAAAA,KAAK,EAAEA,KAFK;AAGZC,QAAAA,EAAE,EAAEA;AAHQ,OAAd;AAKD;AACF;;AAED,WAASE,QAAT,GAAoB;AAClBG,IAAAA,OAAO;AACPhB,IAAAA,IAAI,CAACiB,KAAL,CAAW,IAAX,EAAiBC,SAAjB;AACD;;AAED,WAASF,OAAT,GAAmB;AACjB,QAAIG,CAAJ;;AACA,SAAK,IAAId,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,QAAQ,CAACE,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxCc,MAAAA,CAAC,GAAGf,QAAQ,CAACC,CAAD,CAAZ;AACAc,MAAAA,CAAC,CAACX,EAAF,CAAKY,cAAL,CAAoBD,CAAC,CAACT,KAAtB,EAA6BS,CAAC,CAACR,EAA/B;AACD;AACF;;AAED,WAASU,KAAT,CAAeV,EAAf,EAAmB;AACjBX,IAAAA,IAAI,GAAGW,EAAP;AACD;;AAEDU,EAAAA,KAAK,CAACC,MAAN,GAAeN,OAAf;AAEA,SAAOK,KAAP;AACD;AAED;;;;;;AAKA,SAAST,QAAT,CAAkBF,KAAlB,EAAyBV,IAAzB,EAA+B;AAC7B,SAAO,SAASuB,OAAT,CAAiBC,IAAjB,EAAuB;AAC5B,QAAIC,IAAI,GAAG,IAAIxB,KAAJ,CAAUiB,SAAS,CAACZ,MAApB,CAAX;AACA,QAAIE,EAAE,GAAG,IAAT;AACA,QAAIkB,GAAG,GAAGhB,KAAK,KAAK,OAAV,GACNc,IADM,GAEN,IAFJ,CAH4B,CAO5B;;AACA,SAAK,IAAInB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoB,IAAI,CAACnB,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCoB,MAAAA,IAAI,CAACpB,CAAD,CAAJ,GAAUa,SAAS,CAACb,CAAD,CAAnB;AACD;;AAEDL,IAAAA,IAAI,CAAC0B,GAAD,EAAMlB,EAAN,EAAUE,KAAV,EAAiBe,IAAjB,CAAJ;AACD,GAbD;AAcD","sourcesContent":["/*!\n * ee-first\n * Copyright(c) 2014 Jonathan Ong\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = first\n\n/**\n * Get the first event in a set of event emitters and event pairs.\n *\n * @param {array} stuff\n * @param {function} done\n * @public\n */\n\nfunction first(stuff, done) {\n  if (!Array.isArray(stuff))\n    throw new TypeError('arg must be an array of [ee, events...] arrays')\n\n  var cleanups = []\n\n  for (var i = 0; i < stuff.length; i++) {\n    var arr = stuff[i]\n\n    if (!Array.isArray(arr) || arr.length < 2)\n      throw new TypeError('each array member must be [ee, events...]')\n\n    var ee = arr[0]\n\n    for (var j = 1; j < arr.length; j++) {\n      var event = arr[j]\n      var fn = listener(event, callback)\n\n      // listen to the event\n      ee.on(event, fn)\n      // push this listener to the list of cleanups\n      cleanups.push({\n        ee: ee,\n        event: event,\n        fn: fn,\n      })\n    }\n  }\n\n  function callback() {\n    cleanup()\n    done.apply(null, arguments)\n  }\n\n  function cleanup() {\n    var x\n    for (var i = 0; i < cleanups.length; i++) {\n      x = cleanups[i]\n      x.ee.removeListener(x.event, x.fn)\n    }\n  }\n\n  function thunk(fn) {\n    done = fn\n  }\n\n  thunk.cancel = cleanup\n\n  return thunk\n}\n\n/**\n * Create the event listener.\n * @private\n */\n\nfunction listener(event, done) {\n  return function onevent(arg1) {\n    var args = new Array(arguments.length)\n    var ee = this\n    var err = event === 'error'\n      ? arg1\n      : null\n\n    // copy args to prevent arguments escaping scope\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n\n    done(err, ee, event, args)\n  }\n}\n"]},"metadata":{},"sourceType":"script"}