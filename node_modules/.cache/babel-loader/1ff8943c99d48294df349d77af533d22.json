{"ast":null,"code":"/*\n\tpseudo selectors\n\n\t---\n\n\tthey are available in two forms:\n\t* filters called when the selector\n\t  is compiled and return a function\n\t  that needs to return next()\n\t* pseudos get called on execution\n\t  they need to return a boolean\n*/\nvar DomUtils = require(\"domutils\"),\n    isTag = DomUtils.isTag,\n    getText = DomUtils.getText,\n    getParent = DomUtils.getParent,\n    getChildren = DomUtils.getChildren,\n    getSiblings = DomUtils.getSiblings,\n    hasAttrib = DomUtils.hasAttrib,\n    getName = DomUtils.getName,\n    getAttribute = DomUtils.getAttributeValue,\n    getNCheck = require(\"nth-check\"),\n    checkAttrib = require(\"./attributes.js\").rules.equals,\n    BaseFuncs = require(\"boolbase\"),\n    trueFunc = BaseFuncs.trueFunc,\n    falseFunc = BaseFuncs.falseFunc; //helper methods\n\n\nfunction getFirstElement(elems) {\n  for (var i = 0; elems && i < elems.length; i++) {\n    if (isTag(elems[i])) return elems[i];\n  }\n}\n\nfunction getAttribFunc(name, value) {\n  var data = {\n    name: name,\n    value: value\n  };\n  return function attribFunc(next) {\n    return checkAttrib(next, data);\n  };\n}\n\nfunction getChildFunc(next) {\n  return function (elem) {\n    return !!getParent(elem) && next(elem);\n  };\n}\n\nvar filters = {\n  contains: function (next, text) {\n    return function contains(elem) {\n      return next(elem) && getText(elem).indexOf(text) >= 0;\n    };\n  },\n  icontains: function (next, text) {\n    var itext = text.toLowerCase();\n    return function icontains(elem) {\n      return next(elem) && getText(elem).toLowerCase().indexOf(itext) >= 0;\n    };\n  },\n  //location specific methods\n  \"nth-child\": function (next, rule) {\n    var func = getNCheck(rule);\n    if (func === falseFunc) return func;\n    if (func === trueFunc) return getChildFunc(next);\n    return function nthChild(elem) {\n      var siblings = getSiblings(elem);\n\n      for (var i = 0, pos = 0; i < siblings.length; i++) {\n        if (isTag(siblings[i])) {\n          if (siblings[i] === elem) break;else pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-child\": function (next, rule) {\n    var func = getNCheck(rule);\n    if (func === falseFunc) return func;\n    if (func === trueFunc) return getChildFunc(next);\n    return function nthLastChild(elem) {\n      var siblings = getSiblings(elem);\n\n      for (var pos = 0, i = siblings.length - 1; i >= 0; i--) {\n        if (isTag(siblings[i])) {\n          if (siblings[i] === elem) break;else pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-of-type\": function (next, rule) {\n    var func = getNCheck(rule);\n    if (func === falseFunc) return func;\n    if (func === trueFunc) return getChildFunc(next);\n    return function nthOfType(elem) {\n      var siblings = getSiblings(elem);\n\n      for (var pos = 0, i = 0; i < siblings.length; i++) {\n        if (isTag(siblings[i])) {\n          if (siblings[i] === elem) break;\n          if (getName(siblings[i]) === getName(elem)) pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-of-type\": function (next, rule) {\n    var func = getNCheck(rule);\n    if (func === falseFunc) return func;\n    if (func === trueFunc) return getChildFunc(next);\n    return function nthLastOfType(elem) {\n      var siblings = getSiblings(elem);\n\n      for (var pos = 0, i = siblings.length - 1; i >= 0; i--) {\n        if (isTag(siblings[i])) {\n          if (siblings[i] === elem) break;\n          if (getName(siblings[i]) === getName(elem)) pos++;\n        }\n      }\n\n      return func(pos) && next(elem);\n    };\n  },\n  //TODO determine the actual root element\n  root: function (next) {\n    return function (elem) {\n      return !getParent(elem) && next(elem);\n    };\n  },\n  scope: function (next, rule, options, context) {\n    if (!context || context.length === 0) {\n      //equivalent to :root\n      return filters.root(next);\n    }\n\n    if (context.length === 1) {\n      //NOTE: can't be unpacked, as :has uses this for side-effects\n      return function (elem) {\n        return context[0] === elem && next(elem);\n      };\n    }\n\n    return function (elem) {\n      return context.indexOf(elem) >= 0 && next(elem);\n    };\n  },\n  //jQuery extensions (others follow as pseudos)\n  checkbox: getAttribFunc(\"type\", \"checkbox\"),\n  file: getAttribFunc(\"type\", \"file\"),\n  password: getAttribFunc(\"type\", \"password\"),\n  radio: getAttribFunc(\"type\", \"radio\"),\n  reset: getAttribFunc(\"type\", \"reset\"),\n  image: getAttribFunc(\"type\", \"image\"),\n  submit: getAttribFunc(\"type\", \"submit\")\n}; //while filters are precompiled, pseudos get called when they are needed\n\nvar pseudos = {\n  empty: function (elem) {\n    return !getChildren(elem).some(function (elem) {\n      return isTag(elem) || elem.type === \"text\";\n    });\n  },\n  \"first-child\": function (elem) {\n    return getFirstElement(getSiblings(elem)) === elem;\n  },\n  \"last-child\": function (elem) {\n    var siblings = getSiblings(elem);\n\n    for (var i = siblings.length - 1; i >= 0; i--) {\n      if (siblings[i] === elem) return true;\n      if (isTag(siblings[i])) break;\n    }\n\n    return false;\n  },\n  \"first-of-type\": function (elem) {\n    var siblings = getSiblings(elem);\n\n    for (var i = 0; i < siblings.length; i++) {\n      if (isTag(siblings[i])) {\n        if (siblings[i] === elem) return true;\n        if (getName(siblings[i]) === getName(elem)) break;\n      }\n    }\n\n    return false;\n  },\n  \"last-of-type\": function (elem) {\n    var siblings = getSiblings(elem);\n\n    for (var i = siblings.length - 1; i >= 0; i--) {\n      if (isTag(siblings[i])) {\n        if (siblings[i] === elem) return true;\n        if (getName(siblings[i]) === getName(elem)) break;\n      }\n    }\n\n    return false;\n  },\n  \"only-of-type\": function (elem) {\n    var siblings = getSiblings(elem);\n\n    for (var i = 0, j = siblings.length; i < j; i++) {\n      if (isTag(siblings[i])) {\n        if (siblings[i] === elem) continue;\n        if (getName(siblings[i]) === getName(elem)) return false;\n      }\n    }\n\n    return true;\n  },\n  \"only-child\": function (elem) {\n    var siblings = getSiblings(elem);\n\n    for (var i = 0; i < siblings.length; i++) {\n      if (isTag(siblings[i]) && siblings[i] !== elem) return false;\n    }\n\n    return true;\n  },\n  //:matches(a, area, link)[href]\n  link: function (elem) {\n    return hasAttrib(elem, \"href\");\n  },\n  visited: falseFunc,\n  //seems to be a valid implementation\n  //TODO: :any-link once the name is finalized (as an alias of :link)\n  //forms\n  //to consider: :target\n  //:matches([selected], select:not([multiple]):not(> option[selected]) > option:first-of-type)\n  selected: function (elem) {\n    if (hasAttrib(elem, \"selected\")) return true;else if (getName(elem) !== \"option\") return false; //the first <option> in a <select> is also selected\n\n    var parent = getParent(elem);\n    if (!parent || getName(parent) !== \"select\" || hasAttrib(parent, \"multiple\")) return false;\n    var siblings = getChildren(parent),\n        sawElem = false;\n\n    for (var i = 0; i < siblings.length; i++) {\n      if (isTag(siblings[i])) {\n        if (siblings[i] === elem) {\n          sawElem = true;\n        } else if (!sawElem) {\n          return false;\n        } else if (hasAttrib(siblings[i], \"selected\")) {\n          return false;\n        }\n      }\n    }\n\n    return sawElem;\n  },\n  //https://html.spec.whatwg.org/multipage/scripting.html#disabled-elements\n  //:matches(\n  //  :matches(button, input, select, textarea, menuitem, optgroup, option)[disabled],\n  //  optgroup[disabled] > option),\n  // fieldset[disabled] * //TODO not child of first <legend>\n  //)\n  disabled: function (elem) {\n    return hasAttrib(elem, \"disabled\");\n  },\n  enabled: function (elem) {\n    return !hasAttrib(elem, \"disabled\");\n  },\n  //:matches(:matches(:radio, :checkbox)[checked], :selected) (TODO menuitem)\n  checked: function (elem) {\n    return hasAttrib(elem, \"checked\") || pseudos.selected(elem);\n  },\n  //:matches(input, select, textarea)[required]\n  required: function (elem) {\n    return hasAttrib(elem, \"required\");\n  },\n  //:matches(input, select, textarea):not([required])\n  optional: function (elem) {\n    return !hasAttrib(elem, \"required\");\n  },\n  //jQuery extensions\n  //:not(:empty)\n  parent: function (elem) {\n    return !pseudos.empty(elem);\n  },\n  //:matches(h1, h2, h3, h4, h5, h6)\n  header: function (elem) {\n    var name = getName(elem);\n    return name === \"h1\" || name === \"h2\" || name === \"h3\" || name === \"h4\" || name === \"h5\" || name === \"h6\";\n  },\n  //:matches(button, input[type=button])\n  button: function (elem) {\n    var name = getName(elem);\n    return name === \"button\" || name === \"input\" && getAttribute(elem, \"type\") === \"button\";\n  },\n  //:matches(input, textarea, select, button)\n  input: function (elem) {\n    var name = getName(elem);\n    return name === \"input\" || name === \"textarea\" || name === \"select\" || name === \"button\";\n  },\n  //input:matches(:not([type!='']), [type='text' i])\n  text: function (elem) {\n    var attr;\n    return getName(elem) === \"input\" && (!(attr = getAttribute(elem, \"type\")) || attr.toLowerCase() === \"text\");\n  }\n};\n\nfunction verifyArgs(func, name, subselect) {\n  if (subselect === null) {\n    if (func.length > 1 && name !== \"scope\") {\n      throw new SyntaxError(\"pseudo-selector :\" + name + \" requires an argument\");\n    }\n  } else {\n    if (func.length === 1) {\n      throw new SyntaxError(\"pseudo-selector :\" + name + \" doesn't have any arguments\");\n    }\n  }\n} //FIXME this feels hacky\n\n\nvar re_CSS3 = /^(?:(?:nth|last|first|only)-(?:child|of-type)|root|empty|(?:en|dis)abled|checked|not)$/;\nmodule.exports = {\n  compile: function (next, data, options, context) {\n    var name = data.name,\n        subselect = data.data;\n\n    if (options && options.strict && !re_CSS3.test(name)) {\n      throw SyntaxError(\":\" + name + \" isn't part of CSS3\");\n    }\n\n    if (typeof filters[name] === \"function\") {\n      verifyArgs(filters[name], name, subselect);\n      return filters[name](next, subselect, options, context);\n    } else if (typeof pseudos[name] === \"function\") {\n      var func = pseudos[name];\n      verifyArgs(func, name, subselect);\n      if (next === trueFunc) return func;\n      return function pseudoArgs(elem) {\n        return func(elem, subselect) && next(elem);\n      };\n    } else {\n      throw new SyntaxError(\"unmatched pseudo-class :\" + name);\n    }\n  },\n  filters: filters,\n  pseudos: pseudos\n};","map":{"version":3,"sources":["/Users/dhruv/Sneaks/sneaks-website/node_modules/cheerio/node_modules/css-select/lib/pseudos.js"],"names":["DomUtils","require","isTag","getText","getParent","getChildren","getSiblings","hasAttrib","getName","getAttribute","getAttributeValue","getNCheck","checkAttrib","rules","equals","BaseFuncs","trueFunc","falseFunc","getFirstElement","elems","i","length","getAttribFunc","name","value","data","attribFunc","next","getChildFunc","elem","filters","contains","text","indexOf","icontains","itext","toLowerCase","rule","func","nthChild","siblings","pos","nthLastChild","nthOfType","nthLastOfType","root","scope","options","context","checkbox","file","password","radio","reset","image","submit","pseudos","empty","some","type","j","link","visited","selected","parent","sawElem","disabled","enabled","checked","required","optional","header","button","input","attr","verifyArgs","subselect","SyntaxError","re_CSS3","module","exports","compile","strict","test","pseudoArgs"],"mappings":"AAAA;;;;;;;;;;;;AAaA,IAAIA,QAAQ,GAAMC,OAAO,CAAC,UAAD,CAAzB;AAAA,IACIC,KAAK,GAASF,QAAQ,CAACE,KAD3B;AAAA,IAEIC,OAAO,GAAOH,QAAQ,CAACG,OAF3B;AAAA,IAGIC,SAAS,GAAKJ,QAAQ,CAACI,SAH3B;AAAA,IAIIC,WAAW,GAAGL,QAAQ,CAACK,WAJ3B;AAAA,IAKIC,WAAW,GAAGN,QAAQ,CAACM,WAL3B;AAAA,IAMIC,SAAS,GAAKP,QAAQ,CAACO,SAN3B;AAAA,IAOIC,OAAO,GAAOR,QAAQ,CAACQ,OAP3B;AAAA,IAQIC,YAAY,GAAET,QAAQ,CAACU,iBAR3B;AAAA,IASIC,SAAS,GAAKV,OAAO,CAAC,WAAD,CATzB;AAAA,IAUIW,WAAW,GAAGX,OAAO,CAAC,iBAAD,CAAP,CAA2BY,KAA3B,CAAiCC,MAVnD;AAAA,IAWIC,SAAS,GAAKd,OAAO,CAAC,UAAD,CAXzB;AAAA,IAYIe,QAAQ,GAAMD,SAAS,CAACC,QAZ5B;AAAA,IAaIC,SAAS,GAAKF,SAAS,CAACE,SAb5B,C,CAeA;;;AACA,SAASC,eAAT,CAAyBC,KAAzB,EAA+B;AAC9B,OAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeD,KAAK,IAAIC,CAAC,GAAGD,KAAK,CAACE,MAAlC,EAA0CD,CAAC,EAA3C,EAA8C;AAC7C,QAAGlB,KAAK,CAACiB,KAAK,CAACC,CAAD,CAAN,CAAR,EAAoB,OAAOD,KAAK,CAACC,CAAD,CAAZ;AACpB;AACD;;AAED,SAASE,aAAT,CAAuBC,IAAvB,EAA6BC,KAA7B,EAAmC;AAClC,MAAIC,IAAI,GAAG;AAACF,IAAAA,IAAI,EAAEA,IAAP;AAAaC,IAAAA,KAAK,EAAEA;AAApB,GAAX;AACA,SAAO,SAASE,UAAT,CAAoBC,IAApB,EAAyB;AAC/B,WAAOf,WAAW,CAACe,IAAD,EAAOF,IAAP,CAAlB;AACA,GAFD;AAGA;;AAED,SAASG,YAAT,CAAsBD,IAAtB,EAA2B;AAC1B,SAAO,UAASE,IAAT,EAAc;AACpB,WAAO,CAAC,CAACzB,SAAS,CAACyB,IAAD,CAAX,IAAqBF,IAAI,CAACE,IAAD,CAAhC;AACA,GAFD;AAGA;;AAED,IAAIC,OAAO,GAAG;AACbC,EAAAA,QAAQ,EAAE,UAASJ,IAAT,EAAeK,IAAf,EAAoB;AAC7B,WAAO,SAASD,QAAT,CAAkBF,IAAlB,EAAuB;AAC7B,aAAOF,IAAI,CAACE,IAAD,CAAJ,IAAc1B,OAAO,CAAC0B,IAAD,CAAP,CAAcI,OAAd,CAAsBD,IAAtB,KAA+B,CAApD;AACA,KAFD;AAGA,GALY;AAMbE,EAAAA,SAAS,EAAE,UAASP,IAAT,EAAeK,IAAf,EAAoB;AAC9B,QAAIG,KAAK,GAAGH,IAAI,CAACI,WAAL,EAAZ;AACA,WAAO,SAASF,SAAT,CAAmBL,IAAnB,EAAwB;AAC9B,aAAOF,IAAI,CAACE,IAAD,CAAJ,IACN1B,OAAO,CAAC0B,IAAD,CAAP,CAAcO,WAAd,GAA4BH,OAA5B,CAAoCE,KAApC,KAA8C,CAD/C;AAEA,KAHD;AAIA,GAZY;AAcb;AACA,eAAa,UAASR,IAAT,EAAeU,IAAf,EAAoB;AAChC,QAAIC,IAAI,GAAG3B,SAAS,CAAC0B,IAAD,CAApB;AAEA,QAAGC,IAAI,KAAKrB,SAAZ,EAAuB,OAAOqB,IAAP;AACvB,QAAGA,IAAI,KAAKtB,QAAZ,EAAuB,OAAOY,YAAY,CAACD,IAAD,CAAnB;AAEvB,WAAO,SAASY,QAAT,CAAkBV,IAAlB,EAAuB;AAC7B,UAAIW,QAAQ,GAAGlC,WAAW,CAACuB,IAAD,CAA1B;;AAEA,WAAI,IAAIT,CAAC,GAAG,CAAR,EAAWqB,GAAG,GAAG,CAArB,EAAwBrB,CAAC,GAAGoB,QAAQ,CAACnB,MAArC,EAA6CD,CAAC,EAA9C,EAAiD;AAChD,YAAGlB,KAAK,CAACsC,QAAQ,CAACpB,CAAD,CAAT,CAAR,EAAsB;AACrB,cAAGoB,QAAQ,CAACpB,CAAD,CAAR,KAAgBS,IAAnB,EAAyB,MAAzB,KACKY,GAAG;AACR;AACD;;AAED,aAAOH,IAAI,CAACG,GAAD,CAAJ,IAAad,IAAI,CAACE,IAAD,CAAxB;AACA,KAXD;AAYA,GAjCY;AAkCb,oBAAkB,UAASF,IAAT,EAAeU,IAAf,EAAoB;AACrC,QAAIC,IAAI,GAAG3B,SAAS,CAAC0B,IAAD,CAApB;AAEA,QAAGC,IAAI,KAAKrB,SAAZ,EAAuB,OAAOqB,IAAP;AACvB,QAAGA,IAAI,KAAKtB,QAAZ,EAAuB,OAAOY,YAAY,CAACD,IAAD,CAAnB;AAEvB,WAAO,SAASe,YAAT,CAAsBb,IAAtB,EAA2B;AACjC,UAAIW,QAAQ,GAAGlC,WAAW,CAACuB,IAAD,CAA1B;;AAEA,WAAI,IAAIY,GAAG,GAAG,CAAV,EAAarB,CAAC,GAAGoB,QAAQ,CAACnB,MAAT,GAAkB,CAAvC,EAA0CD,CAAC,IAAI,CAA/C,EAAkDA,CAAC,EAAnD,EAAsD;AACrD,YAAGlB,KAAK,CAACsC,QAAQ,CAACpB,CAAD,CAAT,CAAR,EAAsB;AACrB,cAAGoB,QAAQ,CAACpB,CAAD,CAAR,KAAgBS,IAAnB,EAAyB,MAAzB,KACKY,GAAG;AACR;AACD;;AAED,aAAOH,IAAI,CAACG,GAAD,CAAJ,IAAad,IAAI,CAACE,IAAD,CAAxB;AACA,KAXD;AAYA,GApDY;AAqDb,iBAAe,UAASF,IAAT,EAAeU,IAAf,EAAoB;AAClC,QAAIC,IAAI,GAAG3B,SAAS,CAAC0B,IAAD,CAApB;AAEA,QAAGC,IAAI,KAAKrB,SAAZ,EAAuB,OAAOqB,IAAP;AACvB,QAAGA,IAAI,KAAKtB,QAAZ,EAAuB,OAAOY,YAAY,CAACD,IAAD,CAAnB;AAEvB,WAAO,SAASgB,SAAT,CAAmBd,IAAnB,EAAwB;AAC9B,UAAIW,QAAQ,GAAGlC,WAAW,CAACuB,IAAD,CAA1B;;AAEA,WAAI,IAAIY,GAAG,GAAG,CAAV,EAAarB,CAAC,GAAG,CAArB,EAAwBA,CAAC,GAAGoB,QAAQ,CAACnB,MAArC,EAA6CD,CAAC,EAA9C,EAAiD;AAChD,YAAGlB,KAAK,CAACsC,QAAQ,CAACpB,CAAD,CAAT,CAAR,EAAsB;AACrB,cAAGoB,QAAQ,CAACpB,CAAD,CAAR,KAAgBS,IAAnB,EAAyB;AACzB,cAAGrB,OAAO,CAACgC,QAAQ,CAACpB,CAAD,CAAT,CAAP,KAAyBZ,OAAO,CAACqB,IAAD,CAAnC,EAA2CY,GAAG;AAC9C;AACD;;AAED,aAAOH,IAAI,CAACG,GAAD,CAAJ,IAAad,IAAI,CAACE,IAAD,CAAxB;AACA,KAXD;AAYA,GAvEY;AAwEb,sBAAoB,UAASF,IAAT,EAAeU,IAAf,EAAoB;AACvC,QAAIC,IAAI,GAAG3B,SAAS,CAAC0B,IAAD,CAApB;AAEA,QAAGC,IAAI,KAAKrB,SAAZ,EAAuB,OAAOqB,IAAP;AACvB,QAAGA,IAAI,KAAKtB,QAAZ,EAAuB,OAAOY,YAAY,CAACD,IAAD,CAAnB;AAEvB,WAAO,SAASiB,aAAT,CAAuBf,IAAvB,EAA4B;AAClC,UAAIW,QAAQ,GAAGlC,WAAW,CAACuB,IAAD,CAA1B;;AAEA,WAAI,IAAIY,GAAG,GAAG,CAAV,EAAarB,CAAC,GAAGoB,QAAQ,CAACnB,MAAT,GAAkB,CAAvC,EAA0CD,CAAC,IAAI,CAA/C,EAAkDA,CAAC,EAAnD,EAAsD;AACrD,YAAGlB,KAAK,CAACsC,QAAQ,CAACpB,CAAD,CAAT,CAAR,EAAsB;AACrB,cAAGoB,QAAQ,CAACpB,CAAD,CAAR,KAAgBS,IAAnB,EAAyB;AACzB,cAAGrB,OAAO,CAACgC,QAAQ,CAACpB,CAAD,CAAT,CAAP,KAAyBZ,OAAO,CAACqB,IAAD,CAAnC,EAA2CY,GAAG;AAC9C;AACD;;AAED,aAAOH,IAAI,CAACG,GAAD,CAAJ,IAAad,IAAI,CAACE,IAAD,CAAxB;AACA,KAXD;AAYA,GA1FY;AA4FV;AACAgB,EAAAA,IAAI,EAAE,UAASlB,IAAT,EAAc;AAChB,WAAO,UAASE,IAAT,EAAc;AACjB,aAAO,CAACzB,SAAS,CAACyB,IAAD,CAAV,IAAoBF,IAAI,CAACE,IAAD,CAA/B;AACH,KAFD;AAGH,GAjGS;AAmGViB,EAAAA,KAAK,EAAE,UAASnB,IAAT,EAAeU,IAAf,EAAqBU,OAArB,EAA8BC,OAA9B,EAAsC;AACzC,QAAG,CAACA,OAAD,IAAYA,OAAO,CAAC3B,MAAR,KAAmB,CAAlC,EAAoC;AAChC;AACA,aAAOS,OAAO,CAACe,IAAR,CAAalB,IAAb,CAAP;AACH;;AAED,QAAGqB,OAAO,CAAC3B,MAAR,KAAmB,CAAtB,EAAwB;AACpB;AACA,aAAO,UAASQ,IAAT,EAAc;AACjB,eAAOmB,OAAO,CAAC,CAAD,CAAP,KAAenB,IAAf,IAAuBF,IAAI,CAACE,IAAD,CAAlC;AACH,OAFD;AAGH;;AAED,WAAO,UAASA,IAAT,EAAc;AACjB,aAAOmB,OAAO,CAACf,OAAR,CAAgBJ,IAAhB,KAAyB,CAAzB,IAA8BF,IAAI,CAACE,IAAD,CAAzC;AACH,KAFD;AAGH,GAnHS;AAqHb;AACAoB,EAAAA,QAAQ,EAAE3B,aAAa,CAAC,MAAD,EAAS,UAAT,CAtHV;AAuHb4B,EAAAA,IAAI,EAAE5B,aAAa,CAAC,MAAD,EAAS,MAAT,CAvHN;AAwHb6B,EAAAA,QAAQ,EAAE7B,aAAa,CAAC,MAAD,EAAS,UAAT,CAxHV;AAyHb8B,EAAAA,KAAK,EAAE9B,aAAa,CAAC,MAAD,EAAS,OAAT,CAzHP;AA0Hb+B,EAAAA,KAAK,EAAE/B,aAAa,CAAC,MAAD,EAAS,OAAT,CA1HP;AA2HbgC,EAAAA,KAAK,EAAEhC,aAAa,CAAC,MAAD,EAAS,OAAT,CA3HP;AA4HbiC,EAAAA,MAAM,EAAEjC,aAAa,CAAC,MAAD,EAAS,QAAT;AA5HR,CAAd,C,CA+HA;;AACA,IAAIkC,OAAO,GAAG;AACbC,EAAAA,KAAK,EAAE,UAAS5B,IAAT,EAAc;AACpB,WAAO,CAACxB,WAAW,CAACwB,IAAD,CAAX,CAAkB6B,IAAlB,CAAuB,UAAS7B,IAAT,EAAc;AAC5C,aAAO3B,KAAK,CAAC2B,IAAD,CAAL,IAAeA,IAAI,CAAC8B,IAAL,KAAc,MAApC;AACA,KAFO,CAAR;AAGA,GALY;AAOb,iBAAe,UAAS9B,IAAT,EAAc;AAC5B,WAAOX,eAAe,CAACZ,WAAW,CAACuB,IAAD,CAAZ,CAAf,KAAuCA,IAA9C;AACA,GATY;AAUb,gBAAc,UAASA,IAAT,EAAc;AAC3B,QAAIW,QAAQ,GAAGlC,WAAW,CAACuB,IAAD,CAA1B;;AAEA,SAAI,IAAIT,CAAC,GAAGoB,QAAQ,CAACnB,MAAT,GAAkB,CAA9B,EAAiCD,CAAC,IAAI,CAAtC,EAAyCA,CAAC,EAA1C,EAA6C;AAC5C,UAAGoB,QAAQ,CAACpB,CAAD,CAAR,KAAgBS,IAAnB,EAAyB,OAAO,IAAP;AACzB,UAAG3B,KAAK,CAACsC,QAAQ,CAACpB,CAAD,CAAT,CAAR,EAAuB;AACvB;;AAED,WAAO,KAAP;AACA,GAnBY;AAoBb,mBAAiB,UAASS,IAAT,EAAc;AAC9B,QAAIW,QAAQ,GAAGlC,WAAW,CAACuB,IAAD,CAA1B;;AAEA,SAAI,IAAIT,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGoB,QAAQ,CAACnB,MAA5B,EAAoCD,CAAC,EAArC,EAAwC;AACvC,UAAGlB,KAAK,CAACsC,QAAQ,CAACpB,CAAD,CAAT,CAAR,EAAsB;AACrB,YAAGoB,QAAQ,CAACpB,CAAD,CAAR,KAAgBS,IAAnB,EAAyB,OAAO,IAAP;AACzB,YAAGrB,OAAO,CAACgC,QAAQ,CAACpB,CAAD,CAAT,CAAP,KAAyBZ,OAAO,CAACqB,IAAD,CAAnC,EAA2C;AAC3C;AACD;;AAED,WAAO,KAAP;AACA,GA/BY;AAgCb,kBAAgB,UAASA,IAAT,EAAc;AAC7B,QAAIW,QAAQ,GAAGlC,WAAW,CAACuB,IAAD,CAA1B;;AAEA,SAAI,IAAIT,CAAC,GAAGoB,QAAQ,CAACnB,MAAT,GAAgB,CAA5B,EAA+BD,CAAC,IAAI,CAApC,EAAuCA,CAAC,EAAxC,EAA2C;AAC1C,UAAGlB,KAAK,CAACsC,QAAQ,CAACpB,CAAD,CAAT,CAAR,EAAsB;AACrB,YAAGoB,QAAQ,CAACpB,CAAD,CAAR,KAAgBS,IAAnB,EAAyB,OAAO,IAAP;AACzB,YAAGrB,OAAO,CAACgC,QAAQ,CAACpB,CAAD,CAAT,CAAP,KAAyBZ,OAAO,CAACqB,IAAD,CAAnC,EAA2C;AAC3C;AACD;;AAED,WAAO,KAAP;AACA,GA3CY;AA4Cb,kBAAgB,UAASA,IAAT,EAAc;AAC7B,QAAIW,QAAQ,GAAGlC,WAAW,CAACuB,IAAD,CAA1B;;AAEA,SAAI,IAAIT,CAAC,GAAG,CAAR,EAAWwC,CAAC,GAAGpB,QAAQ,CAACnB,MAA5B,EAAoCD,CAAC,GAAGwC,CAAxC,EAA2CxC,CAAC,EAA5C,EAA+C;AAC9C,UAAGlB,KAAK,CAACsC,QAAQ,CAACpB,CAAD,CAAT,CAAR,EAAsB;AACrB,YAAGoB,QAAQ,CAACpB,CAAD,CAAR,KAAgBS,IAAnB,EAAyB;AACzB,YAAGrB,OAAO,CAACgC,QAAQ,CAACpB,CAAD,CAAT,CAAP,KAAyBZ,OAAO,CAACqB,IAAD,CAAnC,EAA2C,OAAO,KAAP;AAC3C;AACD;;AAED,WAAO,IAAP;AACA,GAvDY;AAwDb,gBAAc,UAASA,IAAT,EAAc;AAC3B,QAAIW,QAAQ,GAAGlC,WAAW,CAACuB,IAAD,CAA1B;;AAEA,SAAI,IAAIT,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGoB,QAAQ,CAACnB,MAA5B,EAAoCD,CAAC,EAArC,EAAwC;AACvC,UAAGlB,KAAK,CAACsC,QAAQ,CAACpB,CAAD,CAAT,CAAL,IAAsBoB,QAAQ,CAACpB,CAAD,CAAR,KAAgBS,IAAzC,EAA+C,OAAO,KAAP;AAC/C;;AAED,WAAO,IAAP;AACA,GAhEY;AAkEb;AACAgC,EAAAA,IAAI,EAAE,UAAShC,IAAT,EAAc;AACnB,WAAOtB,SAAS,CAACsB,IAAD,EAAO,MAAP,CAAhB;AACA,GArEY;AAsEbiC,EAAAA,OAAO,EAAE7C,SAtEI;AAsEO;AACpB;AAEA;AACA;AAEA;AACA8C,EAAAA,QAAQ,EAAE,UAASlC,IAAT,EAAc;AACvB,QAAGtB,SAAS,CAACsB,IAAD,EAAO,UAAP,CAAZ,EAAgC,OAAO,IAAP,CAAhC,KACK,IAAGrB,OAAO,CAACqB,IAAD,CAAP,KAAkB,QAArB,EAA+B,OAAO,KAAP,CAFb,CAIvB;;AACA,QAAImC,MAAM,GAAG5D,SAAS,CAACyB,IAAD,CAAtB;AAEA,QACC,CAACmC,MAAD,IACAxD,OAAO,CAACwD,MAAD,CAAP,KAAoB,QADpB,IAEAzD,SAAS,CAACyD,MAAD,EAAS,UAAT,CAHV,EAIE,OAAO,KAAP;AAEF,QAAIxB,QAAQ,GAAGnC,WAAW,CAAC2D,MAAD,CAA1B;AAAA,QACCC,OAAO,GAAI,KADZ;;AAGA,SAAI,IAAI7C,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGoB,QAAQ,CAACnB,MAA5B,EAAoCD,CAAC,EAArC,EAAwC;AACvC,UAAGlB,KAAK,CAACsC,QAAQ,CAACpB,CAAD,CAAT,CAAR,EAAsB;AACrB,YAAGoB,QAAQ,CAACpB,CAAD,CAAR,KAAgBS,IAAnB,EAAwB;AACvBoC,UAAAA,OAAO,GAAG,IAAV;AACA,SAFD,MAEO,IAAG,CAACA,OAAJ,EAAY;AAClB,iBAAO,KAAP;AACA,SAFM,MAEA,IAAG1D,SAAS,CAACiC,QAAQ,CAACpB,CAAD,CAAT,EAAc,UAAd,CAAZ,EAAsC;AAC5C,iBAAO,KAAP;AACA;AACD;AACD;;AAED,WAAO6C,OAAP;AACA,GA1GY;AA2Gb;AACA;AACA;AACA;AACA;AACA;AACAC,EAAAA,QAAQ,EAAE,UAASrC,IAAT,EAAc;AACvB,WAAOtB,SAAS,CAACsB,IAAD,EAAO,UAAP,CAAhB;AACA,GAnHY;AAoHbsC,EAAAA,OAAO,EAAE,UAAStC,IAAT,EAAc;AACtB,WAAO,CAACtB,SAAS,CAACsB,IAAD,EAAO,UAAP,CAAjB;AACA,GAtHY;AAuHb;AACAuC,EAAAA,OAAO,EAAE,UAASvC,IAAT,EAAc;AACtB,WAAOtB,SAAS,CAACsB,IAAD,EAAO,SAAP,CAAT,IAA8B2B,OAAO,CAACO,QAAR,CAAiBlC,IAAjB,CAArC;AACA,GA1HY;AA2Hb;AACAwC,EAAAA,QAAQ,EAAE,UAASxC,IAAT,EAAc;AACvB,WAAOtB,SAAS,CAACsB,IAAD,EAAO,UAAP,CAAhB;AACA,GA9HY;AA+Hb;AACAyC,EAAAA,QAAQ,EAAE,UAASzC,IAAT,EAAc;AACvB,WAAO,CAACtB,SAAS,CAACsB,IAAD,EAAO,UAAP,CAAjB;AACA,GAlIY;AAoIb;AAEA;AACAmC,EAAAA,MAAM,EAAE,UAASnC,IAAT,EAAc;AACrB,WAAO,CAAC2B,OAAO,CAACC,KAAR,CAAc5B,IAAd,CAAR;AACA,GAzIY;AA0Ib;AACA0C,EAAAA,MAAM,EAAE,UAAS1C,IAAT,EAAc;AACrB,QAAIN,IAAI,GAAGf,OAAO,CAACqB,IAAD,CAAlB;AACA,WAAON,IAAI,KAAK,IAAT,IACAA,IAAI,KAAK,IADT,IAEAA,IAAI,KAAK,IAFT,IAGAA,IAAI,KAAK,IAHT,IAIAA,IAAI,KAAK,IAJT,IAKAA,IAAI,KAAK,IALhB;AAMA,GAnJY;AAqJb;AACAiD,EAAAA,MAAM,EAAE,UAAS3C,IAAT,EAAc;AACrB,QAAIN,IAAI,GAAGf,OAAO,CAACqB,IAAD,CAAlB;AACA,WAAON,IAAI,KAAK,QAAT,IACAA,IAAI,KAAK,OAAT,IACAd,YAAY,CAACoB,IAAD,EAAO,MAAP,CAAZ,KAA+B,QAFtC;AAGA,GA3JY;AA4Jb;AACA4C,EAAAA,KAAK,EAAE,UAAS5C,IAAT,EAAc;AACpB,QAAIN,IAAI,GAAGf,OAAO,CAACqB,IAAD,CAAlB;AACA,WAAON,IAAI,KAAK,OAAT,IACAA,IAAI,KAAK,UADT,IAEAA,IAAI,KAAK,QAFT,IAGAA,IAAI,KAAK,QAHhB;AAIA,GAnKY;AAoKb;AACAS,EAAAA,IAAI,EAAE,UAASH,IAAT,EAAc;AACnB,QAAI6C,IAAJ;AACA,WAAOlE,OAAO,CAACqB,IAAD,CAAP,KAAkB,OAAlB,KACN,EAAE6C,IAAI,GAAGjE,YAAY,CAACoB,IAAD,EAAO,MAAP,CAArB,KACA6C,IAAI,CAACtC,WAAL,OAAuB,MAFjB,CAAP;AAIA;AA3KY,CAAd;;AA8KA,SAASuC,UAAT,CAAoBrC,IAApB,EAA0Bf,IAA1B,EAAgCqD,SAAhC,EAA0C;AACzC,MAAGA,SAAS,KAAK,IAAjB,EAAsB;AACrB,QAAGtC,IAAI,CAACjB,MAAL,GAAc,CAAd,IAAmBE,IAAI,KAAK,OAA/B,EAAuC;AACtC,YAAM,IAAIsD,WAAJ,CAAgB,sBAAsBtD,IAAtB,GAA6B,uBAA7C,CAAN;AACA;AACD,GAJD,MAIO;AACN,QAAGe,IAAI,CAACjB,MAAL,KAAgB,CAAnB,EAAqB;AACpB,YAAM,IAAIwD,WAAJ,CAAgB,sBAAsBtD,IAAtB,GAA6B,6BAA7C,CAAN;AACA;AACD;AACD,C,CAED;;;AACA,IAAIuD,OAAO,GAAG,wFAAd;AAEAC,MAAM,CAACC,OAAP,GAAiB;AAChBC,EAAAA,OAAO,EAAE,UAAStD,IAAT,EAAeF,IAAf,EAAqBsB,OAArB,EAA8BC,OAA9B,EAAsC;AAC9C,QAAIzB,IAAI,GAAGE,IAAI,CAACF,IAAhB;AAAA,QACCqD,SAAS,GAAGnD,IAAI,CAACA,IADlB;;AAGA,QAAGsB,OAAO,IAAIA,OAAO,CAACmC,MAAnB,IAA6B,CAACJ,OAAO,CAACK,IAAR,CAAa5D,IAAb,CAAjC,EAAoD;AACnD,YAAMsD,WAAW,CAAC,MAAMtD,IAAN,GAAa,qBAAd,CAAjB;AACA;;AAED,QAAG,OAAOO,OAAO,CAACP,IAAD,CAAd,KAAyB,UAA5B,EAAuC;AACtCoD,MAAAA,UAAU,CAAC7C,OAAO,CAACP,IAAD,CAAR,EAAgBA,IAAhB,EAAuBqD,SAAvB,CAAV;AACA,aAAO9C,OAAO,CAACP,IAAD,CAAP,CAAcI,IAAd,EAAoBiD,SAApB,EAA+B7B,OAA/B,EAAwCC,OAAxC,CAAP;AACA,KAHD,MAGO,IAAG,OAAOQ,OAAO,CAACjC,IAAD,CAAd,KAAyB,UAA5B,EAAuC;AAC7C,UAAIe,IAAI,GAAGkB,OAAO,CAACjC,IAAD,CAAlB;AACAoD,MAAAA,UAAU,CAACrC,IAAD,EAAOf,IAAP,EAAaqD,SAAb,CAAV;AAEA,UAAGjD,IAAI,KAAKX,QAAZ,EAAsB,OAAOsB,IAAP;AAEtB,aAAO,SAAS8C,UAAT,CAAoBvD,IAApB,EAAyB;AAC/B,eAAOS,IAAI,CAACT,IAAD,EAAO+C,SAAP,CAAJ,IAAyBjD,IAAI,CAACE,IAAD,CAApC;AACA,OAFD;AAGA,KATM,MASA;AACN,YAAM,IAAIgD,WAAJ,CAAgB,6BAA6BtD,IAA7C,CAAN;AACA;AACD,GAxBe;AAyBhBO,EAAAA,OAAO,EAAEA,OAzBO;AA0BhB0B,EAAAA,OAAO,EAAEA;AA1BO,CAAjB","sourcesContent":["/*\n\tpseudo selectors\n\n\t---\n\n\tthey are available in two forms:\n\t* filters called when the selector\n\t  is compiled and return a function\n\t  that needs to return next()\n\t* pseudos get called on execution\n\t  they need to return a boolean\n*/\n\nvar DomUtils    = require(\"domutils\"),\n    isTag       = DomUtils.isTag,\n    getText     = DomUtils.getText,\n    getParent   = DomUtils.getParent,\n    getChildren = DomUtils.getChildren,\n    getSiblings = DomUtils.getSiblings,\n    hasAttrib   = DomUtils.hasAttrib,\n    getName     = DomUtils.getName,\n    getAttribute= DomUtils.getAttributeValue,\n    getNCheck   = require(\"nth-check\"),\n    checkAttrib = require(\"./attributes.js\").rules.equals,\n    BaseFuncs   = require(\"boolbase\"),\n    trueFunc    = BaseFuncs.trueFunc,\n    falseFunc   = BaseFuncs.falseFunc;\n\n//helper methods\nfunction getFirstElement(elems){\n\tfor(var i = 0; elems && i < elems.length; i++){\n\t\tif(isTag(elems[i])) return elems[i];\n\t}\n}\n\nfunction getAttribFunc(name, value){\n\tvar data = {name: name, value: value};\n\treturn function attribFunc(next){\n\t\treturn checkAttrib(next, data);\n\t};\n}\n\nfunction getChildFunc(next){\n\treturn function(elem){\n\t\treturn !!getParent(elem) && next(elem);\n\t};\n}\n\nvar filters = {\n\tcontains: function(next, text){\n\t\treturn function contains(elem){\n\t\t\treturn next(elem) && getText(elem).indexOf(text) >= 0;\n\t\t};\n\t},\n\ticontains: function(next, text){\n\t\tvar itext = text.toLowerCase();\n\t\treturn function icontains(elem){\n\t\t\treturn next(elem) &&\n\t\t\t\tgetText(elem).toLowerCase().indexOf(itext) >= 0;\n\t\t};\n\t},\n\n\t//location specific methods\n\t\"nth-child\": function(next, rule){\n\t\tvar func = getNCheck(rule);\n\n\t\tif(func === falseFunc) return func;\n\t\tif(func === trueFunc)  return getChildFunc(next);\n\n\t\treturn function nthChild(elem){\n\t\t\tvar siblings = getSiblings(elem);\n\n\t\t\tfor(var i = 0, pos = 0; i < siblings.length; i++){\n\t\t\t\tif(isTag(siblings[i])){\n\t\t\t\t\tif(siblings[i] === elem) break;\n\t\t\t\t\telse pos++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn func(pos) && next(elem);\n\t\t};\n\t},\n\t\"nth-last-child\": function(next, rule){\n\t\tvar func = getNCheck(rule);\n\n\t\tif(func === falseFunc) return func;\n\t\tif(func === trueFunc)  return getChildFunc(next);\n\n\t\treturn function nthLastChild(elem){\n\t\t\tvar siblings = getSiblings(elem);\n\n\t\t\tfor(var pos = 0, i = siblings.length - 1; i >= 0; i--){\n\t\t\t\tif(isTag(siblings[i])){\n\t\t\t\t\tif(siblings[i] === elem) break;\n\t\t\t\t\telse pos++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn func(pos) && next(elem);\n\t\t};\n\t},\n\t\"nth-of-type\": function(next, rule){\n\t\tvar func = getNCheck(rule);\n\n\t\tif(func === falseFunc) return func;\n\t\tif(func === trueFunc)  return getChildFunc(next);\n\n\t\treturn function nthOfType(elem){\n\t\t\tvar siblings = getSiblings(elem);\n\n\t\t\tfor(var pos = 0, i = 0; i < siblings.length; i++){\n\t\t\t\tif(isTag(siblings[i])){\n\t\t\t\t\tif(siblings[i] === elem) break;\n\t\t\t\t\tif(getName(siblings[i]) === getName(elem)) pos++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn func(pos) && next(elem);\n\t\t};\n\t},\n\t\"nth-last-of-type\": function(next, rule){\n\t\tvar func = getNCheck(rule);\n\n\t\tif(func === falseFunc) return func;\n\t\tif(func === trueFunc)  return getChildFunc(next);\n\n\t\treturn function nthLastOfType(elem){\n\t\t\tvar siblings = getSiblings(elem);\n\n\t\t\tfor(var pos = 0, i = siblings.length - 1; i >= 0; i--){\n\t\t\t\tif(isTag(siblings[i])){\n\t\t\t\t\tif(siblings[i] === elem) break;\n\t\t\t\t\tif(getName(siblings[i]) === getName(elem)) pos++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn func(pos) && next(elem);\n\t\t};\n\t},\n\n    //TODO determine the actual root element\n    root: function(next){\n        return function(elem){\n            return !getParent(elem) && next(elem);\n        };\n    },\n\n    scope: function(next, rule, options, context){\n        if(!context || context.length === 0){\n            //equivalent to :root\n            return filters.root(next);\n        }\n\n        if(context.length === 1){\n            //NOTE: can't be unpacked, as :has uses this for side-effects\n            return function(elem){\n                return context[0] === elem && next(elem);\n            };\n        }\n\n        return function(elem){\n            return context.indexOf(elem) >= 0 && next(elem);\n        };\n    },\n\n\t//jQuery extensions (others follow as pseudos)\n\tcheckbox: getAttribFunc(\"type\", \"checkbox\"),\n\tfile: getAttribFunc(\"type\", \"file\"),\n\tpassword: getAttribFunc(\"type\", \"password\"),\n\tradio: getAttribFunc(\"type\", \"radio\"),\n\treset: getAttribFunc(\"type\", \"reset\"),\n\timage: getAttribFunc(\"type\", \"image\"),\n\tsubmit: getAttribFunc(\"type\", \"submit\")\n};\n\n//while filters are precompiled, pseudos get called when they are needed\nvar pseudos = {\n\tempty: function(elem){\n\t\treturn !getChildren(elem).some(function(elem){\n\t\t\treturn isTag(elem) || elem.type === \"text\";\n\t\t});\n\t},\n\n\t\"first-child\": function(elem){\n\t\treturn getFirstElement(getSiblings(elem)) === elem;\n\t},\n\t\"last-child\": function(elem){\n\t\tvar siblings = getSiblings(elem);\n\n\t\tfor(var i = siblings.length - 1; i >= 0; i--){\n\t\t\tif(siblings[i] === elem) return true;\n\t\t\tif(isTag(siblings[i])) break;\n\t\t}\n\n\t\treturn false;\n\t},\n\t\"first-of-type\": function(elem){\n\t\tvar siblings = getSiblings(elem);\n\n\t\tfor(var i = 0; i < siblings.length; i++){\n\t\t\tif(isTag(siblings[i])){\n\t\t\t\tif(siblings[i] === elem) return true;\n\t\t\t\tif(getName(siblings[i]) === getName(elem)) break;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\t\"last-of-type\": function(elem){\n\t\tvar siblings = getSiblings(elem);\n\n\t\tfor(var i = siblings.length-1; i >= 0; i--){\n\t\t\tif(isTag(siblings[i])){\n\t\t\t\tif(siblings[i] === elem) return true;\n\t\t\t\tif(getName(siblings[i]) === getName(elem)) break;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\t\"only-of-type\": function(elem){\n\t\tvar siblings = getSiblings(elem);\n\n\t\tfor(var i = 0, j = siblings.length; i < j; i++){\n\t\t\tif(isTag(siblings[i])){\n\t\t\t\tif(siblings[i] === elem) continue;\n\t\t\t\tif(getName(siblings[i]) === getName(elem)) return false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\t\"only-child\": function(elem){\n\t\tvar siblings = getSiblings(elem);\n\n\t\tfor(var i = 0; i < siblings.length; i++){\n\t\t\tif(isTag(siblings[i]) && siblings[i] !== elem) return false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t//:matches(a, area, link)[href]\n\tlink: function(elem){\n\t\treturn hasAttrib(elem, \"href\");\n\t},\n\tvisited: falseFunc, //seems to be a valid implementation\n\t//TODO: :any-link once the name is finalized (as an alias of :link)\n\n\t//forms\n\t//to consider: :target\n\n\t//:matches([selected], select:not([multiple]):not(> option[selected]) > option:first-of-type)\n\tselected: function(elem){\n\t\tif(hasAttrib(elem, \"selected\")) return true;\n\t\telse if(getName(elem) !== \"option\") return false;\n\n\t\t//the first <option> in a <select> is also selected\n\t\tvar parent = getParent(elem);\n\n\t\tif(\n\t\t\t!parent ||\n\t\t\tgetName(parent) !== \"select\" ||\n\t\t\thasAttrib(parent, \"multiple\")\n\t\t) return false;\n\n\t\tvar siblings = getChildren(parent),\n\t\t\tsawElem  = false;\n\n\t\tfor(var i = 0; i < siblings.length; i++){\n\t\t\tif(isTag(siblings[i])){\n\t\t\t\tif(siblings[i] === elem){\n\t\t\t\t\tsawElem = true;\n\t\t\t\t} else if(!sawElem){\n\t\t\t\t\treturn false;\n\t\t\t\t} else if(hasAttrib(siblings[i], \"selected\")){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn sawElem;\n\t},\n\t//https://html.spec.whatwg.org/multipage/scripting.html#disabled-elements\n\t//:matches(\n\t//  :matches(button, input, select, textarea, menuitem, optgroup, option)[disabled],\n\t//  optgroup[disabled] > option),\n\t// fieldset[disabled] * //TODO not child of first <legend>\n\t//)\n\tdisabled: function(elem){\n\t\treturn hasAttrib(elem, \"disabled\");\n\t},\n\tenabled: function(elem){\n\t\treturn !hasAttrib(elem, \"disabled\");\n\t},\n\t//:matches(:matches(:radio, :checkbox)[checked], :selected) (TODO menuitem)\n\tchecked: function(elem){\n\t\treturn hasAttrib(elem, \"checked\") || pseudos.selected(elem);\n\t},\n\t//:matches(input, select, textarea)[required]\n\trequired: function(elem){\n\t\treturn hasAttrib(elem, \"required\");\n\t},\n\t//:matches(input, select, textarea):not([required])\n\toptional: function(elem){\n\t\treturn !hasAttrib(elem, \"required\");\n\t},\n\n\t//jQuery extensions\n\n\t//:not(:empty)\n\tparent: function(elem){\n\t\treturn !pseudos.empty(elem);\n\t},\n\t//:matches(h1, h2, h3, h4, h5, h6)\n\theader: function(elem){\n\t\tvar name = getName(elem);\n\t\treturn name === \"h1\" ||\n\t\t       name === \"h2\" ||\n\t\t       name === \"h3\" ||\n\t\t       name === \"h4\" ||\n\t\t       name === \"h5\" ||\n\t\t       name === \"h6\";\n\t},\n\n\t//:matches(button, input[type=button])\n\tbutton: function(elem){\n\t\tvar name = getName(elem);\n\t\treturn name === \"button\" ||\n\t\t       name === \"input\" &&\n\t\t       getAttribute(elem, \"type\") === \"button\";\n\t},\n\t//:matches(input, textarea, select, button)\n\tinput: function(elem){\n\t\tvar name = getName(elem);\n\t\treturn name === \"input\" ||\n\t\t       name === \"textarea\" ||\n\t\t       name === \"select\" ||\n\t\t       name === \"button\";\n\t},\n\t//input:matches(:not([type!='']), [type='text' i])\n\ttext: function(elem){\n\t\tvar attr;\n\t\treturn getName(elem) === \"input\" && (\n\t\t\t!(attr = getAttribute(elem, \"type\")) ||\n\t\t\tattr.toLowerCase() === \"text\"\n\t\t);\n\t}\n};\n\nfunction verifyArgs(func, name, subselect){\n\tif(subselect === null){\n\t\tif(func.length > 1 && name !== \"scope\"){\n\t\t\tthrow new SyntaxError(\"pseudo-selector :\" + name + \" requires an argument\");\n\t\t}\n\t} else {\n\t\tif(func.length === 1){\n\t\t\tthrow new SyntaxError(\"pseudo-selector :\" + name + \" doesn't have any arguments\");\n\t\t}\n\t}\n}\n\n//FIXME this feels hacky\nvar re_CSS3 = /^(?:(?:nth|last|first|only)-(?:child|of-type)|root|empty|(?:en|dis)abled|checked|not)$/;\n\nmodule.exports = {\n\tcompile: function(next, data, options, context){\n\t\tvar name = data.name,\n\t\t\tsubselect = data.data;\n\n\t\tif(options && options.strict && !re_CSS3.test(name)){\n\t\t\tthrow SyntaxError(\":\" + name + \" isn't part of CSS3\");\n\t\t}\n\n\t\tif(typeof filters[name] === \"function\"){\n\t\t\tverifyArgs(filters[name], name,  subselect);\n\t\t\treturn filters[name](next, subselect, options, context);\n\t\t} else if(typeof pseudos[name] === \"function\"){\n\t\t\tvar func = pseudos[name];\n\t\t\tverifyArgs(func, name, subselect);\n\n\t\t\tif(next === trueFunc) return func;\n\n\t\t\treturn function pseudoArgs(elem){\n\t\t\t\treturn func(elem, subselect) && next(elem);\n\t\t\t};\n\t\t} else {\n\t\t\tthrow new SyntaxError(\"unmatched pseudo-class :\" + name);\n\t\t}\n\t},\n\tfilters: filters,\n\tpseudos: pseudos\n};\n"]},"metadata":{},"sourceType":"script"}