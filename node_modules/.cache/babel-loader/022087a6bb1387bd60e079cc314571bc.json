{"ast":null,"code":"var $ = require('../static'),\n    utils = require('../utils'),\n    isTag = utils.isTag,\n    domEach = utils.domEach,\n    hasOwn = Object.prototype.hasOwnProperty,\n    camelCase = utils.camelCase,\n    cssCase = utils.cssCase,\n    rspace = /\\s+/,\n    dataAttrPrefix = 'data-',\n    _ = {\n  forEach: require('lodash/forEach'),\n  extend: require('lodash/assignIn'),\n  some: require('lodash/some')\n},\n    // Lookup table for coercing string data-* attributes to their corresponding\n// JavaScript primitives\nprimitives = {\n  null: null,\n  true: true,\n  false: false\n},\n    // Attributes that are booleans\nrboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,\n    // Matches strings that look like JSON objects or arrays\nrbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/;\n\nvar getAttr = function (elem, name) {\n  if (!elem || !isTag(elem)) return;\n\n  if (!elem.attribs) {\n    elem.attribs = {};\n  } // Return the entire attribs object if no attribute specified\n\n\n  if (!name) {\n    return elem.attribs;\n  }\n\n  if (hasOwn.call(elem.attribs, name)) {\n    // Get the (decoded) attribute\n    return rboolean.test(name) ? name : elem.attribs[name];\n  } // Mimic the DOM and return text content as value for `option's`\n\n\n  if (elem.name === 'option' && name === 'value') {\n    return $.text(elem.children);\n  } // Mimic DOM with default value for radios/checkboxes\n\n\n  if (elem.name === 'input' && (elem.attribs.type === 'radio' || elem.attribs.type === 'checkbox') && name === 'value') {\n    return 'on';\n  }\n};\n\nvar setAttr = function (el, name, value) {\n  if (value === null) {\n    removeAttribute(el, name);\n  } else {\n    el.attribs[name] = value + '';\n  }\n};\n\nexports.attr = function (name, value) {\n  // Set the value (with attr map support)\n  if (typeof name === 'object' || value !== undefined) {\n    if (typeof value === 'function') {\n      return domEach(this, function (i, el) {\n        setAttr(el, name, value.call(el, i, el.attribs[name]));\n      });\n    }\n\n    return domEach(this, function (i, el) {\n      if (!isTag(el)) return;\n\n      if (typeof name === 'object') {\n        _.forEach(name, function (objValue, objName) {\n          setAttr(el, objName, objValue);\n        });\n      } else {\n        setAttr(el, name, value);\n      }\n    });\n  }\n\n  return getAttr(this[0], name);\n};\n\nvar getProp = function (el, name) {\n  if (!el || !isTag(el)) return;\n  return hasOwn.call(el, name) ? el[name] : rboolean.test(name) ? getAttr(el, name) !== undefined : getAttr(el, name);\n};\n\nvar setProp = function (el, name, value) {\n  el[name] = rboolean.test(name) ? !!value : value;\n};\n\nexports.prop = function (name, value) {\n  var i = 0,\n      property;\n\n  if (typeof name === 'string' && value === undefined) {\n    switch (name) {\n      case 'style':\n        property = this.css();\n\n        _.forEach(property, function (v, p) {\n          property[i++] = p;\n        });\n\n        property.length = i;\n        break;\n\n      case 'tagName':\n      case 'nodeName':\n        property = this[0].name.toUpperCase();\n        break;\n\n      default:\n        property = getProp(this[0], name);\n    }\n\n    return property;\n  }\n\n  if (typeof name === 'object' || value !== undefined) {\n    if (typeof value === 'function') {\n      return domEach(this, function (j, el) {\n        setProp(el, name, value.call(el, j, getProp(el, name)));\n      });\n    }\n\n    return domEach(this, function (__, el) {\n      if (!isTag(el)) return;\n\n      if (typeof name === 'object') {\n        _.forEach(name, function (val, key) {\n          setProp(el, key, val);\n        });\n      } else {\n        setProp(el, name, value);\n      }\n    });\n  }\n};\n\nvar setData = function (el, name, value) {\n  if (!el.data) {\n    el.data = {};\n  }\n\n  if (typeof name === 'object') return _.extend(el.data, name);\n\n  if (typeof name === 'string' && value !== undefined) {\n    el.data[name] = value;\n  }\n}; // Read the specified attribute from the equivalent HTML5 `data-*` attribute,\n// and (if present) cache the value in the node's internal data store. If no\n// attribute name is specified, read *all* HTML5 `data-*` attributes in this\n// manner.\n\n\nvar readData = function (el, name) {\n  var readAll = arguments.length === 1;\n  var domNames, domName, jsNames, jsName, value, idx, length;\n\n  if (readAll) {\n    domNames = Object.keys(el.attribs).filter(function (attrName) {\n      return attrName.slice(0, dataAttrPrefix.length) === dataAttrPrefix;\n    });\n    jsNames = domNames.map(function (_domName) {\n      return camelCase(_domName.slice(dataAttrPrefix.length));\n    });\n  } else {\n    domNames = [dataAttrPrefix + cssCase(name)];\n    jsNames = [name];\n  }\n\n  for (idx = 0, length = domNames.length; idx < length; ++idx) {\n    domName = domNames[idx];\n    jsName = jsNames[idx];\n\n    if (hasOwn.call(el.attribs, domName)) {\n      value = el.attribs[domName];\n\n      if (hasOwn.call(primitives, value)) {\n        value = primitives[value];\n      } else if (value === String(Number(value))) {\n        value = Number(value);\n      } else if (rbrace.test(value)) {\n        try {\n          value = JSON.parse(value);\n        } catch (e) {}\n      }\n\n      el.data[jsName] = value;\n    }\n  }\n\n  return readAll ? el.data : value;\n};\n\nexports.data = function (name, value) {\n  var elem = this[0];\n  if (!elem || !isTag(elem)) return;\n\n  if (!elem.data) {\n    elem.data = {};\n  } // Return the entire data object if no data specified\n\n\n  if (!name) {\n    return readData(elem);\n  } // Set the value (with attr map support)\n\n\n  if (typeof name === 'object' || value !== undefined) {\n    domEach(this, function (i, el) {\n      setData(el, name, value);\n    });\n    return this;\n  } else if (hasOwn.call(elem.data, name)) {\n    return elem.data[name];\n  }\n\n  return readData(elem, name);\n};\n/**\n * Get the value of an element\n */\n\n\nexports.val = function (value) {\n  var querying = arguments.length === 0,\n      element = this[0];\n  if (!element) return;\n\n  switch (element.name) {\n    case 'textarea':\n      return this.text(value);\n\n    case 'input':\n      switch (this.attr('type')) {\n        case 'radio':\n          if (querying) {\n            return this.attr('value');\n          } else {\n            this.attr('value', value);\n            return this;\n          }\n\n          break;\n\n        default:\n          return this.attr('value', value);\n      }\n\n      return;\n\n    case 'select':\n      var option = this.find('option:selected'),\n          returnValue;\n      if (option === undefined) return undefined;\n\n      if (!querying) {\n        if (!hasOwn.call(this.attr(), 'multiple') && typeof value == 'object') {\n          return this;\n        }\n\n        if (typeof value != 'object') {\n          value = [value];\n        }\n\n        this.find('option').removeAttr('selected');\n\n        for (var i = 0; i < value.length; i++) {\n          this.find('option[value=\"' + value[i] + '\"]').attr('selected', '');\n        }\n\n        return this;\n      }\n\n      returnValue = option.attr('value');\n\n      if (hasOwn.call(this.attr(), 'multiple')) {\n        returnValue = [];\n        domEach(option, function (__, el) {\n          returnValue.push(getAttr(el, 'value'));\n        });\n      }\n\n      return returnValue;\n\n    case 'option':\n      if (!querying) {\n        this.attr('value', value);\n        return this;\n      }\n\n      return this.attr('value');\n  }\n};\n/**\n * Remove an attribute\n */\n\n\nvar removeAttribute = function (elem, name) {\n  if (!elem.attribs || !hasOwn.call(elem.attribs, name)) return;\n  delete elem.attribs[name];\n};\n\nexports.removeAttr = function (name) {\n  domEach(this, function (i, elem) {\n    removeAttribute(elem, name);\n  });\n  return this;\n};\n\nexports.hasClass = function (className) {\n  return _.some(this, function (elem) {\n    var attrs = elem.attribs,\n        clazz = attrs && attrs['class'],\n        idx = -1,\n        end;\n\n    if (clazz && className.length) {\n      while ((idx = clazz.indexOf(className, idx + 1)) > -1) {\n        end = idx + className.length;\n\n        if ((idx === 0 || rspace.test(clazz[idx - 1])) && (end === clazz.length || rspace.test(clazz[end]))) {\n          return true;\n        }\n      }\n    }\n  });\n};\n\nexports.addClass = function (value) {\n  // Support functions\n  if (typeof value === 'function') {\n    return domEach(this, function (i, el) {\n      var className = el.attribs['class'] || '';\n      exports.addClass.call([el], value.call(el, i, className));\n    });\n  } // Return if no value or not a string or function\n\n\n  if (!value || typeof value !== 'string') return this;\n  var classNames = value.split(rspace),\n      numElements = this.length;\n\n  for (var i = 0; i < numElements; i++) {\n    // If selected element isn't a tag, move on\n    if (!isTag(this[i])) continue; // If we don't already have classes\n\n    var className = getAttr(this[i], 'class'),\n        numClasses,\n        setClass;\n\n    if (!className) {\n      setAttr(this[i], 'class', classNames.join(' ').trim());\n    } else {\n      setClass = ' ' + className + ' ';\n      numClasses = classNames.length; // Check if class already exists\n\n      for (var j = 0; j < numClasses; j++) {\n        var appendClass = classNames[j] + ' ';\n        if (setClass.indexOf(' ' + appendClass) < 0) setClass += appendClass;\n      }\n\n      setAttr(this[i], 'class', setClass.trim());\n    }\n  }\n\n  return this;\n};\n\nvar splitClass = function (className) {\n  return className ? className.trim().split(rspace) : [];\n};\n\nexports.removeClass = function (value) {\n  var classes, numClasses, removeAll; // Handle if value is a function\n\n  if (typeof value === 'function') {\n    return domEach(this, function (i, el) {\n      exports.removeClass.call([el], value.call(el, i, el.attribs['class'] || ''));\n    });\n  }\n\n  classes = splitClass(value);\n  numClasses = classes.length;\n  removeAll = arguments.length === 0;\n  return domEach(this, function (i, el) {\n    if (!isTag(el)) return;\n\n    if (removeAll) {\n      // Short circuit the remove all case as this is the nice one\n      el.attribs.class = '';\n    } else {\n      var elClasses = splitClass(el.attribs.class),\n          index,\n          changed;\n\n      for (var j = 0; j < numClasses; j++) {\n        index = elClasses.indexOf(classes[j]);\n\n        if (index >= 0) {\n          elClasses.splice(index, 1);\n          changed = true; // We have to do another pass to ensure that there are not duplicate\n          // classes listed\n\n          j--;\n        }\n      }\n\n      if (changed) {\n        el.attribs.class = elClasses.join(' ');\n      }\n    }\n  });\n};\n\nexports.toggleClass = function (value, stateVal) {\n  // Support functions\n  if (typeof value === 'function') {\n    return domEach(this, function (i, el) {\n      exports.toggleClass.call([el], value.call(el, i, el.attribs['class'] || '', stateVal), stateVal);\n    });\n  } // Return if no value or not a string or function\n\n\n  if (!value || typeof value !== 'string') return this;\n  var classNames = value.split(rspace),\n      numClasses = classNames.length,\n      state = typeof stateVal === 'boolean' ? stateVal ? 1 : -1 : 0,\n      numElements = this.length,\n      elementClasses,\n      index;\n\n  for (var i = 0; i < numElements; i++) {\n    // If selected element isn't a tag, move on\n    if (!isTag(this[i])) continue;\n    elementClasses = splitClass(this[i].attribs.class); // Check if class already exists\n\n    for (var j = 0; j < numClasses; j++) {\n      // Check if the class name is currently defined\n      index = elementClasses.indexOf(classNames[j]); // Add if stateValue === true or we are toggling and there is no value\n\n      if (state >= 0 && index < 0) {\n        elementClasses.push(classNames[j]);\n      } else if (state <= 0 && index >= 0) {\n        // Otherwise remove but only if the item exists\n        elementClasses.splice(index, 1);\n      }\n    }\n\n    this[i].attribs.class = elementClasses.join(' ');\n  }\n\n  return this;\n};\n\nexports.is = function (selector) {\n  if (selector) {\n    return this.filter(selector).length > 0;\n  }\n\n  return false;\n};","map":{"version":3,"sources":["/Users/dhruv/Sneaks/sneaks-website/node_modules/cheerio/lib/api/attributes.js"],"names":["$","require","utils","isTag","domEach","hasOwn","Object","prototype","hasOwnProperty","camelCase","cssCase","rspace","dataAttrPrefix","_","forEach","extend","some","primitives","null","true","false","rboolean","rbrace","getAttr","elem","name","attribs","call","test","text","children","type","setAttr","el","value","removeAttribute","exports","attr","undefined","i","objValue","objName","getProp","setProp","prop","property","css","v","p","length","toUpperCase","j","__","val","key","setData","data","readData","readAll","arguments","domNames","domName","jsNames","jsName","idx","keys","filter","attrName","slice","map","_domName","String","Number","JSON","parse","e","querying","element","option","find","returnValue","removeAttr","push","hasClass","className","attrs","clazz","end","indexOf","addClass","classNames","split","numElements","numClasses","setClass","join","trim","appendClass","splitClass","removeClass","classes","removeAll","class","elClasses","index","changed","splice","toggleClass","stateVal","state","elementClasses","is","selector"],"mappings":"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","sourcesContent":["var $ = require('../static'),\n    utils = require('../utils'),\n    isTag = utils.isTag,\n    domEach = utils.domEach,\n    hasOwn = Object.prototype.hasOwnProperty,\n    camelCase = utils.camelCase,\n    cssCase = utils.cssCase,\n    rspace = /\\s+/,\n    dataAttrPrefix = 'data-',\n    _ = {\n      forEach: require('lodash/forEach'),\n      extend: require('lodash/assignIn'),\n      some: require('lodash/some')\n    },\n\n  // Lookup table for coercing string data-* attributes to their corresponding\n  // JavaScript primitives\n  primitives = {\n    null: null,\n    true: true,\n    false: false\n  },\n\n  // Attributes that are booleans\n  rboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,\n  // Matches strings that look like JSON objects or arrays\n  rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/;\n\n\nvar getAttr = function(elem, name) {\n  if (!elem || !isTag(elem)) return;\n\n  if (!elem.attribs) {\n    elem.attribs = {};\n  }\n\n  // Return the entire attribs object if no attribute specified\n  if (!name) {\n    return elem.attribs;\n  }\n\n  if (hasOwn.call(elem.attribs, name)) {\n    // Get the (decoded) attribute\n    return rboolean.test(name) ? name : elem.attribs[name];\n  }\n\n  // Mimic the DOM and return text content as value for `option's`\n  if (elem.name === 'option' && name === 'value') {\n    return $.text(elem.children);\n  }\n\n  // Mimic DOM with default value for radios/checkboxes\n  if (elem.name === 'input' &&\n      (elem.attribs.type === 'radio' || elem.attribs.type === 'checkbox') &&\n      name === 'value') {\n    return 'on';\n  }\n};\n\nvar setAttr = function(el, name, value) {\n\n  if (value === null) {\n    removeAttribute(el, name);\n  } else {\n    el.attribs[name] = value+'';\n  }\n};\n\nexports.attr = function(name, value) {\n  // Set the value (with attr map support)\n  if (typeof name === 'object' || value !== undefined) {\n    if (typeof value === 'function') {\n      return domEach(this, function(i, el) {\n        setAttr(el, name, value.call(el, i, el.attribs[name]));\n      });\n    }\n    return domEach(this, function(i, el) {\n      if (!isTag(el)) return;\n\n      if (typeof name === 'object') {\n        _.forEach(name, function(objValue, objName) {\n          setAttr(el, objName, objValue);\n        });\n      } else {\n        setAttr(el, name, value);\n      }\n    });\n  }\n\n  return getAttr(this[0], name);\n};\n\nvar getProp = function (el, name) {\n  if (!el || !isTag(el)) return;\n\n  return hasOwn.call(el, name)\n      ? el[name]\n      : rboolean.test(name)\n          ? getAttr(el, name) !== undefined\n          : getAttr(el, name);\n};\n\nvar setProp = function (el, name, value) {\n  el[name] = rboolean.test(name) ? !!value : value;\n};\n\nexports.prop = function (name, value) {\n  var i = 0,\n      property;\n\n  if (typeof name === 'string' && value === undefined) {\n\n    switch (name) {\n      case 'style':\n        property = this.css();\n\n        _.forEach(property, function (v, p) {\n          property[i++] = p;\n        });\n\n        property.length = i;\n\n        break;\n      case 'tagName':\n      case 'nodeName':\n        property = this[0].name.toUpperCase();\n        break;\n      default:\n        property = getProp(this[0], name);\n    }\n\n    return property;\n  }\n\n  if (typeof name === 'object' || value !== undefined) {\n\n    if (typeof value === 'function') {\n      return domEach(this, function(j, el) {\n        setProp(el, name, value.call(el, j, getProp(el, name)));\n      });\n    }\n\n    return domEach(this, function(__, el) {\n      if (!isTag(el)) return;\n\n      if (typeof name === 'object') {\n\n        _.forEach(name, function(val, key) {\n          setProp(el, key, val);\n        });\n\n      } else {\n        setProp(el, name, value);\n      }\n    });\n\n  }\n};\n\nvar setData = function(el, name, value) {\n  if (!el.data) {\n    el.data = {};\n  }\n\n  if (typeof name === 'object') return _.extend(el.data, name);\n  if (typeof name === 'string' && value !== undefined) {\n    el.data[name] = value;\n  }\n};\n\n// Read the specified attribute from the equivalent HTML5 `data-*` attribute,\n// and (if present) cache the value in the node's internal data store. If no\n// attribute name is specified, read *all* HTML5 `data-*` attributes in this\n// manner.\nvar readData = function(el, name) {\n  var readAll = arguments.length === 1;\n  var domNames, domName, jsNames, jsName, value, idx, length;\n\n  if (readAll) {\n    domNames = Object.keys(el.attribs).filter(function(attrName) {\n      return attrName.slice(0, dataAttrPrefix.length) === dataAttrPrefix;\n    });\n    jsNames = domNames.map(function(_domName) {\n      return camelCase(_domName.slice(dataAttrPrefix.length));\n    });\n  } else {\n    domNames = [dataAttrPrefix + cssCase(name)];\n    jsNames = [name];\n  }\n\n  for (idx = 0, length = domNames.length; idx < length; ++idx) {\n    domName = domNames[idx];\n    jsName = jsNames[idx];\n    if (hasOwn.call(el.attribs, domName)) {\n      value = el.attribs[domName];\n\n      if (hasOwn.call(primitives, value)) {\n        value = primitives[value];\n      } else if (value === String(Number(value))) {\n        value = Number(value);\n      } else if (rbrace.test(value)) {\n        try {\n          value = JSON.parse(value);\n        } catch(e){ }\n      }\n\n      el.data[jsName] = value;\n    }\n  }\n\n  return readAll ? el.data : value;\n};\n\nexports.data = function(name, value) {\n  var elem = this[0];\n\n  if (!elem || !isTag(elem)) return;\n\n  if (!elem.data) {\n    elem.data = {};\n  }\n\n  // Return the entire data object if no data specified\n  if (!name) {\n    return readData(elem);\n  }\n\n  // Set the value (with attr map support)\n  if (typeof name === 'object' || value !== undefined) {\n    domEach(this, function(i, el) {\n      setData(el, name, value);\n    });\n    return this;\n  } else if (hasOwn.call(elem.data, name)) {\n    return elem.data[name];\n  }\n\n  return readData(elem, name);\n};\n\n/**\n * Get the value of an element\n */\n\nexports.val = function(value) {\n  var querying = arguments.length === 0,\n      element = this[0];\n\n  if(!element) return;\n\n  switch (element.name) {\n    case 'textarea':\n      return this.text(value);\n    case 'input':\n      switch (this.attr('type')) {\n        case 'radio':\n          if (querying) {\n            return this.attr('value');\n          } else {\n            this.attr('value', value);\n            return this;\n          }\n          break;\n        default:\n          return this.attr('value', value);\n      }\n      return;\n    case 'select':\n      var option = this.find('option:selected'),\n          returnValue;\n      if (option === undefined) return undefined;\n      if (!querying) {\n        if (!hasOwn.call(this.attr(), 'multiple') && typeof value == 'object') {\n          return this;\n        }\n        if (typeof value != 'object') {\n          value = [value];\n        }\n        this.find('option').removeAttr('selected');\n        for (var i = 0; i < value.length; i++) {\n          this.find('option[value=\"' + value[i] + '\"]').attr('selected', '');\n        }\n        return this;\n      }\n      returnValue = option.attr('value');\n      if (hasOwn.call(this.attr(), 'multiple')) {\n        returnValue = [];\n        domEach(option, function(__, el) {\n          returnValue.push(getAttr(el, 'value'));\n        });\n      }\n      return returnValue;\n    case 'option':\n      if (!querying) {\n        this.attr('value', value);\n        return this;\n      }\n      return this.attr('value');\n  }\n};\n\n/**\n * Remove an attribute\n */\n\nvar removeAttribute = function(elem, name) {\n  if (!elem.attribs || !hasOwn.call(elem.attribs, name))\n    return;\n\n  delete elem.attribs[name];\n};\n\n\nexports.removeAttr = function(name) {\n  domEach(this, function(i, elem) {\n    removeAttribute(elem, name);\n  });\n\n  return this;\n};\n\nexports.hasClass = function(className) {\n  return _.some(this, function(elem) {\n    var attrs = elem.attribs,\n        clazz = attrs && attrs['class'],\n        idx = -1,\n        end;\n\n    if (clazz && className.length) {\n      while ((idx = clazz.indexOf(className, idx+1)) > -1) {\n        end = idx + className.length;\n\n        if ((idx === 0 || rspace.test(clazz[idx-1]))\n            && (end === clazz.length || rspace.test(clazz[end]))) {\n          return true;\n        }\n      }\n    }\n  });\n};\n\nexports.addClass = function(value) {\n  // Support functions\n  if (typeof value === 'function') {\n    return domEach(this, function(i, el) {\n      var className = el.attribs['class'] || '';\n      exports.addClass.call([el], value.call(el, i, className));\n    });\n  }\n\n  // Return if no value or not a string or function\n  if (!value || typeof value !== 'string') return this;\n\n  var classNames = value.split(rspace),\n      numElements = this.length;\n\n\n  for (var i = 0; i < numElements; i++) {\n    // If selected element isn't a tag, move on\n    if (!isTag(this[i])) continue;\n\n    // If we don't already have classes\n    var className = getAttr(this[i], 'class'),\n        numClasses,\n        setClass;\n\n    if (!className) {\n      setAttr(this[i], 'class', classNames.join(' ').trim());\n    } else {\n      setClass = ' ' + className + ' ';\n      numClasses = classNames.length;\n\n      // Check if class already exists\n      for (var j = 0; j < numClasses; j++) {\n        var appendClass = classNames[j] + ' ';\n        if (setClass.indexOf(' ' + appendClass) < 0)\n          setClass += appendClass;\n      }\n\n      setAttr(this[i], 'class', setClass.trim());\n    }\n  }\n\n  return this;\n};\n\nvar splitClass = function(className) {\n  return className ? className.trim().split(rspace) : [];\n};\n\nexports.removeClass = function(value) {\n  var classes,\n      numClasses,\n      removeAll;\n\n  // Handle if value is a function\n  if (typeof value === 'function') {\n    return domEach(this, function(i, el) {\n      exports.removeClass.call(\n        [el], value.call(el, i, el.attribs['class'] || '')\n      );\n    });\n  }\n\n  classes = splitClass(value);\n  numClasses = classes.length;\n  removeAll = arguments.length === 0;\n\n  return domEach(this, function(i, el) {\n    if (!isTag(el)) return;\n\n    if (removeAll) {\n      // Short circuit the remove all case as this is the nice one\n      el.attribs.class = '';\n    } else {\n      var elClasses = splitClass(el.attribs.class),\n          index,\n          changed;\n\n      for (var j = 0; j < numClasses; j++) {\n        index = elClasses.indexOf(classes[j]);\n\n        if (index >= 0) {\n          elClasses.splice(index, 1);\n          changed = true;\n\n          // We have to do another pass to ensure that there are not duplicate\n          // classes listed\n          j--;\n        }\n      }\n      if (changed) {\n        el.attribs.class = elClasses.join(' ');\n      }\n    }\n  });\n};\n\nexports.toggleClass = function(value, stateVal) {\n  // Support functions\n  if (typeof value === 'function') {\n    return domEach(this, function(i, el) {\n      exports.toggleClass.call(\n        [el],\n        value.call(el, i, el.attribs['class'] || '', stateVal),\n        stateVal\n      );\n    });\n  }\n\n  // Return if no value or not a string or function\n  if (!value || typeof value !== 'string') return this;\n\n  var classNames = value.split(rspace),\n    numClasses = classNames.length,\n    state = typeof stateVal === 'boolean' ? stateVal ? 1 : -1 : 0,\n    numElements = this.length,\n    elementClasses,\n    index;\n\n  for (var i = 0; i < numElements; i++) {\n    // If selected element isn't a tag, move on\n    if (!isTag(this[i])) continue;\n\n    elementClasses = splitClass(this[i].attribs.class);\n\n    // Check if class already exists\n    for (var j = 0; j < numClasses; j++) {\n      // Check if the class name is currently defined\n      index = elementClasses.indexOf(classNames[j]);\n\n      // Add if stateValue === true or we are toggling and there is no value\n      if (state >= 0 && index < 0) {\n        elementClasses.push(classNames[j]);\n      } else if (state <= 0 && index >= 0) {\n        // Otherwise remove but only if the item exists\n        elementClasses.splice(index, 1);\n      }\n    }\n\n    this[i].attribs.class = elementClasses.join(' ');\n  }\n\n  return this;\n};\n\nexports.is = function (selector) {\n  if (selector) {\n    return this.filter(selector).length > 0;\n  }\n  return false;\n};\n"]},"metadata":{},"sourceType":"script"}